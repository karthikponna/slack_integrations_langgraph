{
    "id": "a1bafbcad4cd43c9f52bcbf7d4dcf0b4",
    "metadata": {
        "id": "a1bafbcad4cd43c9f52bcbf7d4dcf0b4",
        "url": "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image",
        "title": "Deploy with custom images | ZenML - Bridging the gap between ML & Ops",
        "properties": {
            "description": "Deploying ZenML with custom Docker images.",
            "keywords": null,
            "author": null,
            "og:title": "Deploy with custom images | ZenML - Bridging the gap between ML & Ops",
            "og:description": "Deploying ZenML with custom Docker images.",
            "og:image": "https://docs.zenml.io/~gitbook/ogimage/yf1EjsDJanSALcs9kEdl",
            "twitter:card": "summary_large_image",
            "twitter:title": "Deploy with custom images | ZenML - Bridging the gap between ML & Ops",
            "twitter:description": "Deploying ZenML with custom Docker images.",
            "twitter:image": "https://docs.zenml.io/~gitbook/ogimage/yf1EjsDJanSALcs9kEdl"
        }
    },
    "content": "`⌘``k`\nGitBook Assistant\nProductResourcesGitHubStart free\nMore\n  * Documentation\n  * Learn\n  * ZenML Pro\n  * Stacks\n  * API Reference\n  * SDK Reference\n  * Changelog\n\n\nGitBook Assistant\nGitBook Assistant\nWorking...Thinking...\nGitBook Assistant\n##### Good afternoon\nI'm here to help you with the docs.\nWhat is this page about?What should I read next?Can you give an example?\n`⌘``i`\nAI Based on your context\nSend\n  * Getting Started\n    *     *     *     *     *     *   * Deploying ZenML\n    *       * Deploy with Docker\n      * Deploy with Helm\n      * Deploy using HuggingFace Spaces\n      * Deploy with custom images\n      * Secret management\n      * Custom secret stores\n    *     *   * Concepts\n    *     *     *     *     *     *     *     *     *     *     *     *     *     *     *   * Reference\n    *     *     *     *     *     * \n\nPowered by GitBook\n  * Build and Push Custom ZenML Server Docker Image\n  * Deploy ZenML with your custom image\n\n\nWas this helpful?\nGitBook AssistantAsk\n  1. Deploying ZenML\n  2. \n\n# Deploy with custom images\nDeploying ZenML with custom Docker images.\nIn most cases, deploying ZenML with the default `zenmlhub/zenml-server` Docker image should work just fine. However, there are some scenarios when you might need to deploy ZenML with a custom Docker image:\n  * You have implemented a custom artifact store for which you want to enable artifact visualizations or step logs in your dashboard.\n  * You have forked the ZenML repository and want to deploy a ZenML server based on your own fork because you made changes to the server / database logic.\n\n\nDeploying ZenML with custom Docker images is only possible for Docker or Helm deployments.\n### \nBuild and Push Custom ZenML Server Docker Image\nHere is how you can build a custom ZenML server Docker image:\n  1. Set up a container registry of your choice. E.g., as an indivial developer you could create a free Docker Hub account and then set up a free Docker Hub repository.\n  2. Clone ZenML (or your ZenML fork) and checkout the branch that you want to deploy, e.g., if you want to deploy ZenML version 0.41.0, run\nCopy```\ngitcheckoutrelease/0.41.0\n```\n\n  3. Copy the ZenML base.Dockerfile, e.g.:\nCopy```\ncpdocker/base.Dockerfiledocker/custom.Dockerfile\n```\n\n  4. Modify the copied Dockerfile:\n     * Add additional dependencies:\nCopy```\nRUNpipinstall<my_package>\n```\n\n     * (Forks only) install local files instead of official ZenML:\nCopy```\nRUNpipinstall-e.[server,secrets-aws,secrets-gcp,secrets-azure,secrets-hashicorp,s3fs,gcsfs,adlfs,connectors-aws,connectors-gcp,connectors-azure]\n```\n\n  5. Build and push an image based on your Dockerfile:\nCopy```\ndockerbuild-fdocker/custom.Dockerfile.-t<YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>--platformlinux/amd64\ndockerpush<YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n```\n\n\n\nIf you want to verify your custom image locally, you can follow the Deploy a custom ZenML image via Docker section below to deploy the ZenML server locally first.\n### \nDeploy ZenML with your custom image\nNext, adjust your preferred deployment strategy to use the custom Docker image you just built.\n#### \nDeploy a custom ZenML image via Docker\nTo deploy your custom image via Docker, first familiarize yourself with the general ZenML Docker Deployment Guide.\nTo use your own image, follow the general guide step by step but replace all mentions of `zenmldocker/zenml-server` with your custom image reference `<YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>`. E.g.:\n  * To run the ZenML server with Docker based on your custom image, do\n\n\nCopy```\ndocker run -it -d -p 8080:8080 --name zenml <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n```\n\n  * To use `docker-compose`, adjust your `docker-compose.yml`:\n\n\nCopy```\nservices:\n  zenml:\n    image: <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n```\n\n#### \nDeploy a custom ZenML image via Helm\nTo deploy your custom image via Helm, first familiarize yourself with the general ZenML Helm Deployment Guide.\nTo use your own image, the only thing you need to do differently is to modify the `image` section of your `values.yaml` file:\nCopy```\nzenml:\n  image:\n    repository: <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>\n    tag: <IMAGE_TAG>\n```\n\nPreviousDeploy using HuggingFace SpacesNextSecret management\nLast updated 7 months ago\nWas this helpful?\nThis site uses cookies to deliver its service and to analyze traffic. By browsing this site, you accept the privacy policy.\nAcceptReject\n",
    "summary": "## TL;DR Summary\n\n### Deploying ZenML\n- **Custom Docker Images**: Deploy ZenML with custom Docker images when:\n  - Implementing a custom artifact store for visualizations or logs.\n  - Forking the ZenML repository for custom server/database logic.\n- **Deployment Options**: Custom images are supported for Docker and Helm deployments.\n\n### Build and Push Custom ZenML Server Docker Image\n1. Set up a container registry (e.g., Docker Hub).\n2. Clone ZenML and checkout the desired branch (e.g., `release/0.41.0`).\n3. Copy the base Dockerfile:\n   ```bash\n   cp docker/base.Dockerfile docker/custom.Dockerfile\n   ```\n4. Modify the Dockerfile to add dependencies or install local files for forks.\n5. Build and push the image:\n   ```bash\n   docker build -f docker/custom.Dockerfile -t <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG> --platform linux/amd64\n   docker push <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n   ```\n\n### Deploying Custom Images\n- **Via Docker**: Replace `zenmlhub/zenml-server` with your custom image in the deployment commands.\n- **Via Helm**: Modify the `image` section in `values.yaml` to point to your custom image.",
    "content_quality_score": null,
    "child_urls": [
        "https://docs.zenml.io/",
        "https://zenml.io",
        "https://zenml.io/slack",
        "https://cloud.zenml.io/signup",
        "https://docs.zenml.io/user-guides",
        "https://docs.zenml.io/pro",
        "https://docs.zenml.io/stacks",
        "https://docs.zenml.io/api-reference",
        "https://docs.zenml.io/sdk-reference",
        "https://docs.zenml.io/changelog",
        "https://docs.zenml.io/getting-started/installation",
        "https://docs.zenml.io/getting-started/hello-world",
        "https://docs.zenml.io/getting-started/your-first-ai-pipeline",
        "https://docs.zenml.io/getting-started/core-concepts",
        "https://docs.zenml.io/getting-started/system-architectures",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-docker",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-helm",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-using-huggingface-spaces",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/secret-management",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/custom-secret-stores",
        "https://docs.zenml.io/deploying-zenml/connecting-to-zenml",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server",
        "https://docs.zenml.io/concepts/steps_and_pipelines",
        "https://docs.zenml.io/concepts/artifacts",
        "https://docs.zenml.io/concepts/stack_components",
        "https://docs.zenml.io/concepts/service_connectors",
        "https://docs.zenml.io/concepts/snapshots",
        "https://docs.zenml.io/concepts/deployment",
        "https://docs.zenml.io/concepts/containerization",
        "https://docs.zenml.io/concepts/code-repositories",
        "https://docs.zenml.io/concepts/secrets",
        "https://docs.zenml.io/concepts/environment-variables",
        "https://docs.zenml.io/concepts/tags",
        "https://docs.zenml.io/concepts/metadata",
        "https://docs.zenml.io/concepts/models",
        "https://docs.zenml.io/concepts/dashboard-features",
        "https://docs.zenml.io/concepts/templates",
        "https://docs.zenml.io/reference/community-and-content",
        "https://docs.zenml.io/reference/environment-variables",
        "https://docs.zenml.io/reference/llms-txt",
        "https://docs.zenml.io/reference/faq",
        "https://docs.zenml.io/reference/global-settings",
        "https://docs.zenml.io/reference/legacy-docs",
        "https://docs.zenml.io/deploying-zenml",
        "https://docs.zenml.io/concepts/artifacts/visualizations",
        "https://docs.zenml.io/concepts/steps_and_pipelines/logging",
        "https://www.zenml.io/privacy-policy",
        "https://github.com/zenml-io/zenml",
        "https://www.gitbook.com/",
        "https://hub.docker.com/",
        "https://github.com/zenml-io/zenml/blob/main/docker/base.Dockerfile"
    ]
}