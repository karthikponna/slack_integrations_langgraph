{
    "id": "95c2fe10fef6c2eec0a77d5832119a1c",
    "metadata": {
        "id": "95c2fe10fef6c2eec0a77d5832119a1c",
        "url": "https://docs.zenml.io/concepts/steps_and_pipelines/yaml_configuration",
        "title": "YAML Configuration | ZenML - Bridging the gap between ML & Ops",
        "properties": {
            "description": "Learn how to configure ZenML pipelines using YAML configuration files.",
            "keywords": null,
            "author": null,
            "og:title": "YAML Configuration | ZenML - Bridging the gap between ML & Ops",
            "og:description": "Learn how to configure ZenML pipelines using YAML configuration files.",
            "og:image": "https://docs.zenml.io/~gitbook/ogimage/Lr6t3chsEobPyrgkF1RT",
            "twitter:card": "summary_large_image",
            "twitter:title": "YAML Configuration | ZenML - Bridging the gap between ML & Ops",
            "twitter:description": "Learn how to configure ZenML pipelines using YAML configuration files.",
            "twitter:image": "https://docs.zenml.io/~gitbook/ogimage/Lr6t3chsEobPyrgkF1RT"
        }
    },
    "content": "`Ctrl``k`\nGitBook AssistantAsk\nProductResourcesGitHubStart free\nMore\n  * Documentation\n  * Learn\n  * ZenML Pro\n  * Stacks\n  * API Reference\n  * SDK Reference\n  * Changelog\n\n\nGitBook Assistant\nGitBook Assistant\nWorking...Thinking...\nGitBook Assistant\n##### Good afternoon\nI'm here to help you with the docs.\nWhat is this page about?What should I read next?Can you give an example?\n`Ctrl``i`\nAI Based on your context\nSend\n  * Getting Started\n    *     *     *     *     *     *   * Deploying ZenML\n    *     *     *   * Concepts\n    *       * Configuration\n      * Scheduling\n      * Logging\n      * YAML Configuration\n      *       * Advanced Features\n      * Dynamic Pipelines (Experimental)\n    *     *     *     *     *     *     *     *     *     *     *     *     *     *   * Reference\n    *     *     *     *     *     * \n\nPowered by GitBook\n  * Basic Usage\n  * Sample Configuration File\n  * Configuration Hierarchy\n  * Configuring Steps and Pipelines\n  * Pipeline and Step Parameters\n  * Enable Flags\n  * Run Name\n  * Resource and Component Configuration\n  * Docker Settings\n  * Resource Settings\n  * Stack Component Settings\n  * Working with Configuration Files\n  * Autogenerating Template YAML Files\n  * Environment Variables in Configuration\n  * Using Configuration Files for Different Environments\n  * Advanced Configuration Options\n  * Model Configuration\n  * Scheduling\n  * Conclusion\n\n\nWas this helpful?\nGitBook AssistantAsk\n  1. Concepts\n  2. \n\n# YAML Configuration\nLearn how to configure ZenML pipelines using YAML configuration files.\nZenML provides configuration capabilities through YAML files that allow you to customize pipeline and step behavior without changing your code. This is particularly useful for separating configuration from code, experimenting with different parameters, and ensuring reproducibility.\n## \nBasic Usage\nYou can apply a YAML configuration file when running a pipeline:\nCopy```\nmy_pipeline.with_options(config_path=\"config.yaml\")()\n```\n\nThis allows you to change pipeline behavior without modifying your code.\n### \nSample Configuration File\nHere's a simple example of a YAML configuration file:\nCopy```\n# Enable/disable features\nenable_cache:False\nenable_step_logs:True\n# Pipeline parameters\nparameters:dataset_name:\"my_dataset\"\nlearning_rate:0.01\n# Step-specific configuration\nsteps:\ntrain_model:\nparameters:\nlearning_rate:0.001# Override the pipeline parameter for this step\nenable_cache:True# Override the pipeline cache setting\n```\n\n### \nConfiguration Hierarchy\nZenML follows a specific hierarchy when resolving configuration:\n  1. **Runtime Python code** - Highest precedence\n  2. **Step-level YAML configuration**\nCopy```\nsteps:\n  train_model:\n    parameters:\n      learning_rate: 0.001  # Overrides pipeline-level setting\n```\n\n  3. **Pipeline-level YAML configuration**\nCopy```\nparameters:\n  learning_rate: 0.01  # Lower precedence than step-level\n```\n\n  4. **Default values in code** - Lowest precedence\n\n\nThis hierarchy allows you to define base configurations at the pipeline level and override them for specific steps as needed.\n## \nConfiguring Steps and Pipelines\n### \nPipeline and Step Parameters\nYou can specify parameters for pipelines and steps, similar to how you'd define them in Python code:\nCopy```\n# Pipeline parameters\nparameters:\n  dataset_name: \"my_dataset\"\n  learning_rate: 0.01\n  batch_size: 32\n  epochs: 10\n# Step parameters\nsteps:\n  preprocessing:\n    parameters:\n      normalize: True\n      fill_missing: \"mean\"\n  \n  train_model:\n    parameters:\n      learning_rate: 0.001  # Override the pipeline parameter\n      optimizer: \"adam\"\n```\n\nThese settings correspond directly to the parameters you'd normally pass to your pipeline and step functions.\n### \nEnable Flags\nThese boolean flags control aspects of pipeline execution that were covered in the Advanced Features section:\nCopy```\n# Pipeline-level flags\nenable_artifact_metadata: True      # Whether to collect and store metadata for artifacts\nenable_artifact_visualization: True  # Whether to generate visualizations for artifacts\nenable_cache: True                  # Whether to use caching for steps\nenable_step_logs: True              # Whether to capture and store step logs\n# Step-specific flags\nsteps:\n  preprocessing:\n    enable_cache: False             # Disable caching for this step only\n  train_model:\n    enable_artifact_visualization: False  # Disable visualizations for this step\n```\n\n### \nRun Name\nSet a custom name for the pipeline run:\nCopy```\nrun_name: \"training_run_cifar10_resnet50_lr0.001\"\n```\n\n**Important:** Pipeline run names must be unique within a project. If you try to run a pipeline with a name that already exists, you'll get an error. To avoid this:\n  1. **Use dynamic placeholders** to ensure uniqueness:\nCopy```\n# Example 1: Use placeholders for date and time to ensure uniqueness\nrun_name: \"training_run_{date}_{time}\"\n# Example 2: Combine placeholders with specific details for better context\nrun_name: \"training_run_cifar10_resnet50_lr0.001_{date}_{time}\"\n```\n\n  2. **Remove the 'run_name' from your config** to let ZenML auto-generate unique names\n  3. **Change the run_name** before rerunning the pipeline\n\n\nAvailable placeholders: `{date}`, `{time}`, and any parameters defined in your pipeline configuration.\n## \nResource and Component Configuration\n### \nDocker Settings\nConfigure Docker container settings for pipeline execution:\nCopy```\nsettings:\n  docker:\n    # Packages to install via apt-get\n    apt_packages: [\"curl\", \"git\", \"libgomp1\"]\n    \n    # Whether to copy files from current directory to the Docker image\n    copy_files: True\n    \n    # Environment variables to set in the container\n    environment:\n      ZENML_LOGGING_VERBOSITY: DEBUG\n      PYTHONUNBUFFERED: \"1\"\n    \n    # Parent image to use for building\n    parent_image: \"zenml-io/zenml-cuda:latest\"\n    \n    # Additional Python packages to install\n    requirements: [\"torch==1.10.0\", \"transformers>=4.0.0\", \"pandas\"]\n```\n\n### \nResource Settings\nConfigure compute resources for pipeline or step execution:\nCopy```\n# Pipeline-level resource settings\nsettings:\n  resources:\n    cpu_count: 2\n    gpu_count: 1\n    memory: \"4Gb\"\n# Step-specific resource settings\nsteps:\n  train_model:\n    settings:\n      resources:\n        cpu_count: 4\n        gpu_count: 2\n        memory: \"16Gb\"\n```\n\n### \nStack Component Settings\nConfigure specific stack components for steps:\nCopy```\nsteps:\n  train_model:\n    # Use specific named components\n    experiment_tracker: \"mlflow_tracker\"\n    step_operator: \"vertex_gpu\"\n    \n    # Component-specific settings\n    settings:\n      # MLflow specific configuration\n      experiment_tracker.mlflow:\n        experiment_name: \"image_classification\"\n        nested: True\n```\n\n## \nWorking with Configuration Files\n### \nAutogenerating Template YAML Files\nZenML provides a command to generate a template configuration file:\nCopy```\nzenml pipeline build-configuration my_pipeline > config.yaml\n```\n\nThis generates a YAML file with all pipeline parameters, step parameters, and configuration options with their default values.\n### \nEnvironment Variables in Configuration\nYou can reference environment variables in your YAML configuration:\nCopy```\nsettings:\n  docker:\n    environment:\n      # References an environment variable from the host system\n      API_KEY: ${MY_API_KEY}\n      DATABASE_URL: ${DB_CONNECTION_STRING}\n```\n\n### \nUsing Configuration Files for Different Environments\nA common pattern is to maintain different configuration files for different environments:\nCopy```\n├── configs/\n│   ├── dev.yaml     # Development configuration\n│   ├── staging.yaml # Staging configuration\n│   └── prod.yaml    # Production configuration\n```\n\nExample development configuration:\nCopy```\n# dev.yaml\nenable_cache: False\nenable_step_logs: True\nparameters:\n  dataset_size: \"small\"\nsettings:\n  docker:\n    parent_image: \"zenml-io/zenml:latest\"\n```\n\nExample production configuration:\nCopy```\n# prod.yaml\nenable_cache: True\nenable_step_logs: False\nparameters:\n  dataset_size: \"full\"\nsettings:\n  docker:\n    parent_image: \"zenml-io/zenml-cuda:latest\"\n  resources:\n    cpu_count: 8\n    memory: \"16Gb\"\n```\n\nYou can then specify which configuration to use:\nCopy```\n# For development\nmy_pipeline.with_options(config_path=\"configs/dev.yaml\")()\n# For production\nmy_pipeline.with_options(config_path=\"configs/prod.yaml\")()\n```\n\n## \nAdvanced Configuration Options\n### \nModel Configuration\nLink a pipeline to a ZenML Model:\nCopy```\nmodel:\n  name: \"classification_model\"\n  description: \"Image classifier trained on the CIFAR-10 dataset\"\n  tags: [\"computer-vision\", \"classification\", \"pytorch\"]\n  \n  # Specific model version\n  version: \"1.2.3\"\n```\n\n### \nScheduling\nConfigure pipeline scheduling when using an orchestrator that supports it:\nCopy```\nschedule:\n  # Whether to run the pipeline for past dates if schedule is missed\n  catchup: false\n  \n  # Cron expression for scheduling (daily at midnight)\n  cron_expression: \"0 0 * * *\"\n  \n  # Time to start scheduling from\n  start_time: \"2023-06-01T00:00:00Z\"\n```\n\n## \nConclusion\nYAML configuration in ZenML provides a powerful way to customize pipeline behavior without changing your code. By separating configuration from implementation, you can make your ML workflows more flexible, maintainable, and reproducible.\nSee also:\n  * Steps & Pipelines - Core building blocks\n  * Advanced Features - Advanced pipeline features\n\n\nPreviousLoggingNextSource Code and Imports\nLast updated 2 months ago\nWas this helpful?\n",
    "summary": null,
    "content_quality_score": null,
    "child_urls": [
        "https://docs.zenml.io/",
        "https://zenml.io",
        "https://zenml.io/slack",
        "https://cloud.zenml.io/signup",
        "https://docs.zenml.io/user-guides",
        "https://docs.zenml.io/pro",
        "https://docs.zenml.io/stacks",
        "https://docs.zenml.io/api-reference",
        "https://docs.zenml.io/sdk-reference",
        "https://docs.zenml.io/changelog",
        "https://docs.zenml.io/getting-started/installation",
        "https://docs.zenml.io/getting-started/hello-world",
        "https://docs.zenml.io/getting-started/your-first-ai-pipeline",
        "https://docs.zenml.io/getting-started/core-concepts",
        "https://docs.zenml.io/getting-started/system-architectures",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml",
        "https://docs.zenml.io/deploying-zenml/connecting-to-zenml",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server",
        "https://docs.zenml.io/concepts/steps_and_pipelines",
        "https://docs.zenml.io/concepts/steps_and_pipelines/configuration",
        "https://docs.zenml.io/concepts/steps_and_pipelines/scheduling",
        "https://docs.zenml.io/concepts/steps_and_pipelines/logging",
        "https://docs.zenml.io/concepts/steps_and_pipelines/yaml_configuration",
        "https://docs.zenml.io/concepts/steps_and_pipelines/sources",
        "https://docs.zenml.io/concepts/steps_and_pipelines/advanced_features",
        "https://docs.zenml.io/concepts/steps_and_pipelines/dynamic_pipelines",
        "https://docs.zenml.io/concepts/artifacts",
        "https://docs.zenml.io/concepts/stack_components",
        "https://docs.zenml.io/concepts/service_connectors",
        "https://docs.zenml.io/concepts/snapshots",
        "https://docs.zenml.io/concepts/deployment",
        "https://docs.zenml.io/concepts/containerization",
        "https://docs.zenml.io/concepts/code-repositories",
        "https://docs.zenml.io/concepts/secrets",
        "https://docs.zenml.io/concepts/environment-variables",
        "https://docs.zenml.io/concepts/tags",
        "https://docs.zenml.io/concepts/metadata",
        "https://docs.zenml.io/concepts/models",
        "https://docs.zenml.io/concepts/dashboard-features",
        "https://docs.zenml.io/concepts/templates",
        "https://docs.zenml.io/reference/community-and-content",
        "https://docs.zenml.io/reference/environment-variables",
        "https://docs.zenml.io/reference/llms-txt",
        "https://docs.zenml.io/reference/faq",
        "https://docs.zenml.io/reference/global-settings",
        "https://docs.zenml.io/reference/legacy-docs",
        "https://docs.zenml.io/concepts",
        "https://github.com/zenml-io/zenml",
        "https://www.gitbook.com/"
    ]
}